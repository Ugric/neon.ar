import "__parser" as *
import "__render" as *

let template(pathToTemplate) = do
    let File = file.read(pathToTemplate)
    let parsed = __parser(File.text())
    File.close()
    File = null
    let output = {}
    output.render(values) = do
        let stack = [create_built_ins(),values]
        let output = []
        for (i from 0 to parsed.length) do
            output.append(__render(parsed[i], stack))
        return output.join('')
    return output